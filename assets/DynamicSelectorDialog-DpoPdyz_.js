import{r as n,j as s,D as C,a as E,b as W,T as w,C as k,w as B,x as P,a8 as R,y as U,U as f,i as g,a9 as j,W as S,aa as T,V as D,k as V}from"./index-BowguTbL.js";const A=({open:o,onClose:l,onSelect:p,collectionName:i,headerText:b,searchField:e,displayFields:c,filterFunction:u})=>{const[a,m]=n.useState(""),[I,d]=n.useState([]),[L,x]=n.useState(!1);n.useEffect(()=>{if(!o){d([]),m("");return}const t=async()=>{x(!0);try{let r=f(g(j,i),S(e),T(50));a&&(r=f(g(j,i),D(e,">=",a),D(e,"<=",a+"ï£¿"),S(e),T(50)));const h=(await V(r)).docs.map(y=>({id:y.id,...y.data()}));d(u?h.filter(u):h)}catch(r){console.error("Error fetching documents: ",r)}finally{x(!1)}},v=setTimeout(()=>{t()},500);return()=>clearTimeout(v)},[a,o,i,e,u]);const q=t=>{p(t.id,t),l()};return s.jsxs(C,{open:o,onClose:l,fullWidth:!0,maxWidth:"sm",children:[s.jsx(E,{children:b}),s.jsxs(W,{children:[s.jsx(w,{autoFocus:!0,margin:"dense",label:`Search by ${e}`,type:"text",fullWidth:!0,variant:"standard",value:a,onChange:t=>m(t.target.value)}),L?s.jsx(k,{}):s.jsx(B,{children:I.map(t=>s.jsx(P,{disablePadding:!0,children:s.jsx(R,{onClick:()=>q(t),children:s.jsx(U,{primary:t[c.primary],secondary:c.secondary?t[c.secondary]:void 0})})},t.id))})]})]})};export{A as D};
