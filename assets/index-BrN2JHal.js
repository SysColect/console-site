import{j as r,ar as x,av as F,at as f,r as n,Q as T,au as y}from"./index-44ng3IKi.js";import{T as E}from"./ToolPageLayout-EmMhmdvk.js";import{F as N,R as C,N as S}from"./firestore.source-BvdjQgrB.js";const b=r.jsxs(r.Fragment,{children:[r.jsx(x,{name:"name",label:"Name",formField:!0}),r.jsx(x,{name:"description",label:"Description",formField:!0}),r.jsx(F,{name:"icon",label:"Icon",formField:!0})]}),D=a=>{const o={};return o.name=f.required("O nome do grupo é obrigatório")(a.name),o.description=f.required("A descrição do grupo é obrigatória")(a.description),o.icon=f.required("Você deve selecionar um ícone")(a.icon),Object.entries(o).reduce((l,[c,d])=>(d&&(l[c]=d),l),{})},L=()=>{const[a,o]=n.useState([]),[l,c]=n.useState(!0),[d,h]=n.useState(null),{showConfirmation:G,showAlert:g}=T(),i=n.useMemo(()=>{const e=new N("consoleToolGroups"),t=new S;return new C(e,t)},[]),u=n.useCallback(async()=>{c(!0),h(null);try{const e=await i.getAll({sort:{field:"name",direction:"asc"}});o(e)}catch(e){console.error("Error fetching tool groups:",e),h("Falha ao carregar os grupos de ferramentas. Por favor, tente novamente mais tarde.")}finally{c(!1)}},[i]);n.useEffect(()=>{u()},[u]);const w=[{field:"icon",headerName:"Ícone",width:100,renderCell:e=>r.jsx("i",{className:`fa-solid fa-${e.value}`,style:{fontSize:24}})},{field:"name",headerName:"Nome",width:200},{field:"description",headerName:"Descrição",width:300},{field:"id",headerName:"ID",width:250}],j=async(e,t)=>{const{id:m,...p}=e;try{if(t){const s=await i.create(p);o([...a,s])}else await i.update(m,p),o(a.map(s=>s.id===m?{...s,...p,id:m}:s))}catch(s){console.error("Error saving tool group:",s),g({title:"Erro",message:"Falha ao salvar o grupo de ferramentas."})}},v=e=>{G({title:"Confirmar Exclusão",message:`Você tem certeza que deseja excluir o grupo de ferramentas ${e.name}? Esta ação não pode ser desfeita.`,onConfirm:async()=>{try{await i.delete(e.id),o(a.filter(t=>t.id!==e.id))}catch(t){console.error("Error deleting tool group:",t),g({title:"Erro",message:"Falha ao excluir o grupo de ferramentas. Por favor, tente novamente mais tarde."})}}})};return r.jsx(y,{title:"Grupos de Ferramentas",rows:a,columns:w,loading:l,error:d,initialValues:{name:"",description:"",icon:""},dialogTitle:"Grupo de Ferramentas",onSave:j,onDelete:v,onRefresh:u,onValidate:D,hideAddButton:!1,children:b})},A=()=>r.jsx(E,{title:"Tool Group Manager",children:r.jsx(L,{})});export{A as default};
