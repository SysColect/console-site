import{j as r,as as G,at as E,au as f,r as l,g as F,Q as b,m as T,n as C,av as S,k as y,p as N,ap as v,aw as R}from"./index-s15rESzp.js";import{T as q}from"./ToolPageLayout-DkLl636-.js";const L=r.jsxs(r.Fragment,{children:[r.jsx(G,{name:"name",label:"Name",formField:!0}),r.jsx(G,{name:"description",label:"Description",formField:!0}),r.jsx(E,{name:"icon",label:"Icon",formField:!0})]}),A=t=>{const e={};return e.name=f.required("O nome do grupo é obrigatório")(t.name),e.description=f.required("A descrição do grupo é obrigatória")(t.description),e.icon=f.required("Você deve selecionar um ícone")(t.icon),Object.entries(e).reduce((c,[d,u])=>(u&&(c[d]=u),c),{})},I=()=>{const[t,e]=l.useState([]),[c,d]=l.useState(!0),[u,g]=l.useState(null),i=F(),{showConfirmation:x,showAlert:h}=b(),p=l.useCallback(async()=>{d(!0),g(null);try{const o=T(i,"consoleToolGroups"),s=(await C(o)).docs.map(a=>({id:a.id,...a.data()}));e(s)}catch(o){console.error("Error fetching tool groups:",o),g("Failed to load tool groups. Please try again later.")}finally{d(!1)}},[i]);l.useEffect(()=>{p()},[p]);const j=[{field:"icon",headerName:"Icon",width:100,renderCell:o=>r.jsx("i",{className:`fa-solid fa-${o.value}`,style:{fontSize:24}})},{field:"name",headerName:"Name",width:200},{field:"description",headerName:"Description",width:300},{field:"id",headerName:"ID",width:250}],w=async(o,n)=>{const s={name:o.name,description:o.description,icon:o.icon};try{if(n){const a=await v(T(i,"consoleToolGroups"),s);e([...t,{...s,id:a.id}])}else{const a=y(i,"consoleToolGroups",o.id);await R(a,s),e(t.map(m=>m.id===o.id?{...m,...s}:m))}}catch(a){console.error("Error saving tool group:",a),h({title:"Error",message:"Failed to save tool group."})}},D=o=>{x({title:"Confirm Deletion",message:`Are you sure you want to delete the tool group ${o.name}? This action cannot be undone.`,onConfirm:async()=>{try{const n=y(i,"consoleToolGroups",o.id);await N(n),e(t.filter(s=>s.id!==o.id))}catch(n){console.error("Error deleting tool group:",n),h({title:"Error",message:"Failed to delete tool group. Please try again later."})}}})};return r.jsx(S,{title:"Tool Groups",rows:t,columns:j,loading:c,error:u,initialValues:{name:"",description:"",icon:""},dialogTitle:"Tool Group",onSave:w,onDelete:D,onRefresh:p,onValidate:A,hideAddButton:!1,children:L})},k=()=>r.jsx(q,{title:"Tool Group Manager",children:r.jsx(I,{})});export{k as default};
