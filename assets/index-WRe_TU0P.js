import{j as r,u as G,$ as w,q as h,r as l,i as F,av as d,k as y}from"./index-CMTZ79cl.js";import{T as b}from"./ToolPageLayout-b2zAKi_p.js";const C=r.jsxs(r.Fragment,{children:[r.jsx(G,{name:"name",label:"Name",formField:!0}),r.jsx(G,{name:"description",label:"Description",formField:!0}),r.jsx(w,{name:"icon",label:"Icon",formField:!0})]}),D=a=>{const o={};return o.name=h.required("O nome do grupo é obrigatório")(a.name),o.description=h.required("A descrição do grupo é obrigatória")(a.description),o.icon=h.required("Você deve selecionar um ícone")(a.icon),Object.entries(o).reduce((c,[u,m])=>(m&&(c[u]=m),c),{})},N=()=>{const[a,o]=l.useState([]),[c,u]=l.useState(!0),[m,g]=l.useState(null),{showConfirmation:j,showAlert:x}=F(),p=l.useCallback(async()=>{u(!0),g(null);try{const e=await d.getAll();o(e)}catch(e){console.error("Error fetching tool groups:",e),g("Falha ao carregar os grupos de ferramentas. Por favor, tente novamente mais tarde.")}finally{u(!1)}},[]);l.useEffect(()=>{p()},[p]);const T=[{field:"icon",headerName:"Ícone",width:100,renderCell:e=>r.jsx("i",{className:`fa-solid fa-${e.value}`,style:{fontSize:24}})},{field:"name",headerName:"Nome",width:200},{field:"description",headerName:"Descrição",width:300},{field:"id",headerName:"ID",width:250}],v=async(e,t)=>{const{id:s,...f}=e;try{if(t){const n=await d.create(f);o(i=>[...i,n])}else await d.update(s,f),o(n=>n.map(i=>i.id===s?{...i,...f,id:s}:i))}catch(n){console.error("Error saving tool group:",n),x({title:"Erro",message:"Falha ao salvar o grupo de ferramentas."})}},E=e=>{j({title:"Confirmar Exclusão",message:`Você tem certeza que deseja excluir o grupo de ferramentas ${e.name}? Esta ação não pode ser desfeita.`,onConfirm:async()=>{try{await d.remove(e.id),o(t=>t.filter(s=>s.id!==e.id))}catch(t){console.error("Error deleting tool group:",t),x({title:"Erro",message:"Falha ao excluir o grupo de ferramentas. Por favor, tente novamente mais tarde."})}}})};return r.jsx(y,{title:"Grupos de Ferramentas",rows:a,columns:T,loading:c,error:m,initialValues:d.getDefaultToolGroup(),dialogTitle:"Grupo de Ferramentas",onSave:v,onDelete:E,onRefresh:p,onValidate:D,hideAddButton:!1,children:C})},L=()=>r.jsx(b,{title:"Tool Group Manager",children:r.jsx(N,{})});export{L as default};
