import{j as r,aa as G,ab as w,ac as f,r as l,g as E,o as F,n as y,p as S,ad as C,l as T,t as N,a1 as q,ae as R}from"./index-DYHoXdso.js";import{T as v}from"./ToolPageLayout-B0UWFUD6.js";const A=r.jsxs(r.Fragment,{children:[r.jsx(G,{name:"name",label:"Name",formField:!0}),r.jsx(G,{name:"description",label:"Description",formField:!0}),r.jsx(w,{name:"icon",label:"Icon",formField:!0})]}),P=t=>{const e={};return e.name=f.required("O nome do grupo é obrigatório")(t.name),e.description=f.required("A descrição do grupo é obrigatória")(t.description),e.icon=f.required("Você deve selecionar um ícone")(t.icon),Object.entries(e).reduce((c,[d,u])=>(u&&(c[d]=u),c),{})},I=()=>{const[t,e]=l.useState([]),[c,d]=l.useState(!0),[u,g]=l.useState(null),i=E(),{showConfirmation:x,showAlert:h}=F(),p=l.useCallback(async()=>{d(!0),g(null);try{const o=y(i,"consoleToolGroups"),s=(await S(o)).docs.map(a=>({id:a.id,...a.data()}));e(s)}catch(o){console.error("Error fetching tool groups:",o),g("Failed to load tool groups. Please try again later.")}finally{d(!1)}},[i]);l.useEffect(()=>{p()},[p]);const j=[{field:"icon",headerName:"Icon",width:100,renderCell:o=>r.jsx("i",{className:`fa-solid fa-${o.value}`,style:{fontSize:24}})},{field:"name",headerName:"Name",width:200},{field:"description",headerName:"Description",width:300},{field:"id",headerName:"ID",width:250}],D=async(o,n)=>{const s={name:o.name,description:o.description,icon:o.icon};try{if(n){const a=await q(y(i,"consoleToolGroups"),s);e([...t,{...s,id:a.id}])}else{const a=T(i,"consoleToolGroups",o.id);await R(a,s),e(t.map(m=>m.id===o.id?{...m,...s}:m))}}catch(a){console.error("Error saving tool group:",a),h({title:"Error",message:"Failed to save tool group."})}},b=o=>{x({title:"Confirm Deletion",message:`Are you sure you want to delete the tool group ${o.name}? This action cannot be undone.`,onConfirm:async()=>{try{const n=T(i,"consoleToolGroups",o.id);await N(n),e(t.filter(s=>s.id!==o.id))}catch(n){console.error("Error deleting tool group:",n),h({title:"Error",message:"Failed to delete tool group. Please try again later."})}}})};return r.jsx(C,{title:"Tool Groups",rows:t,columns:j,loading:c,error:u,initialValues:{name:"",description:"",icon:""},dialogTitle:"Tool Group",onSave:D,onDelete:b,onRefresh:p,onValidate:P,hideAddButton:!1,children:A})},$=()=>r.jsx(v,{title:"Tool Group Manager",children:r.jsx(I,{})});export{$ as default};
